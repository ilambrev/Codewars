function conquerIsland(map) {
    const pirateInitialPosition = [0, 0];

    function findElementsCoordinates(element) {
        const coordinates = [];

        for (let i = 0; i < 8; i++) {
            for (let j = 0; j < 8; j++) {
                if (map[i][j] == element) {
                    coordinates.push([i, j]);
                }
            }
        }

        return coordinates;
    }

    function findClosestDistance(coordinates) {
        if (coordinates.length == 0) {
            return coordinates;
        }

        const sortedCoordinates = coordinates.sort((c1, c2) => {
            const distance1 = c1[0] - pirateInitialPosition[0] + c1[1] - pirateInitialPosition[1];
            const distance2 = c2[0] - pirateInitialPosition[0] + c2[1] - pirateInitialPosition[1];
            if (distance1 < distance2) {
                return -1;
            } else if (distance1 > distance2) {
                return 1;
            } else if (c1[0] < c2[0]) {
                return -1;
            } else if (c1[0] > c2[0]) {
                return 1;
            } else {
                return 0;
            }
        });

        const bestDistance = sortedCoordinates[0][0] + sortedCoordinates[0][1];

        return sortedCoordinates.filter(c => c[0] + c[1] == bestDistance);
    }

    let coordinates = findElementsCoordinates('u');

    if (coordinates.length == 0) {
        coordinates = findElementsCoordinates('m');
    }

    return findClosestDistance(coordinates);
}

// console.log(conquerIsland(
//     [
//         ['p', '~', '~', 'u', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~']
//     ]
// ));

// console.log(conquerIsland(
//     [
//         ['p', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['u', '~', '~', '~', '~', '~', '~', '~']
//     ]
// ));

// console.log(conquerIsland(
//     [
//         ['p', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~']
//     ]
// ));

// console.log(conquerIsland(
//     [
//         ['p', '~', 'u', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['u', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', 'u']
//     ]
// ));

// console.log(conquerIsland(
//     [
//         ['p', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', 'm', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', 'u', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~']
//     ]
// ));

// console.log(conquerIsland(
//     [
//         ['p', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', 'm', '~', '~', '~', '~'],
//         ['m', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', 'm', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~'],
//         ['~', '~', '~', 'm', '~', '~', '~', '~'],
//         ['~', '~', '~', '~', '~', '~', '~', '~']
//     ]
// ));